<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NotOut News — Sinhala Breaking & Daily News</title>
  <meta name="description" content="තත්පරවත්ම සිංහල ප්‍රවෘත්ති, බිඳවැටෙන ප්‍රවෘත්ති, ක්‍රීඩා, කලා, දේශපාලනය, ගැස්සിപ്പ്—all in one place." />
  <meta property="og:title" content="NotOut News" />
  <meta property="og:description" content="සිංහල Breaking News & දෛනික ප්‍රවෘත්ති — NotOut News" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/cover.jpg" />
  <meta name="theme-color" content="#c1121f" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@300;400;500;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --brand:#c1121f;       /* Primary (news red) */
      --brand-dark:#780000;  /* Deep red */
      --ink:#111;            /* Text */
      --muted:#6b7280;       /* Gray */
      --bg:#ffffff;          /* Background */
      --soft:#f8f9fa;        /* Cards */
      --accent:#1d4ed8;      /* Blue for links (brand blue) */
      --ok:#16a34a;          /* Success */
      --warn:#f59e0b;        /* Warning */
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:"Noto Sans Sinhala", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:1180px;margin:0 auto;padding:0 16px}
    header.top{
      position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid #eee
    }
    .brand{display:flex;align-items:center;gap:12px;padding:14px 0}
    .logo{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,var(--brand),var(--brand-dark));display:grid;place-items:center;color:#fff;font-weight:900;letter-spacing:1px}
    .brand h1{font-size:1.35rem;margin:0}
    .tagline{color:var(--muted);font-size:.9rem}
    nav.cats{display:flex;flex-wrap:wrap;gap:10px;padding:10px 0 14px}
    nav.cats a{padding:8px 12px;border-radius:999px;background:var(--soft);color:#111;border:1px solid #eee;font-weight:600}
    nav.cats a.active{background:var(--brand);border-color:var(--brand);color:#fff}

    /* Breaking ticker */
    .ticker{background:var(--brand);color:#fff}
    .ticker .inner{display:flex;gap:12px;align-items:center;padding:8px 0}
    .badge{font-weight:800;background:#fff;color:var(--brand);padding:4px 8px;border-radius:6px}
    .marquee{overflow:hidden;white-space:nowrap;flex:1}
    .marquee span{display:inline-block;padding-left:100%;animation:slide 22s linear infinite}
    @keyframes slide{0%{transform:translateX(0)}100%{transform:translateX(-100%)} }

    /* Layout */
    .grid{display:grid;grid-template-columns:2fr 1fr;gap:22px;margin:18px 0 28px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}

    .card{background:#fff;border:1px solid #eee;border-radius:14px;overflow:hidden}
    .card img{width:100%;height:220px;object-fit:cover}
    .card .pad{padding:14px}
    .card h3{margin:6px 0 8px;font-size:1.15rem}
    .muted{color:var(--muted);font-size:.9rem}

    /* Featured */
    .featured{display:grid;grid-template-columns:1.2fr 1fr;gap:18px}
    @media (max-width:900px){.featured{grid-template-columns:1fr}}

    .postlist{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    @media (max-width:1000px){.postlist{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:640px){.postlist{grid-template-columns:1fr}}

    /* Sidebar */
    aside .widget{background:#fff;border:1px solid #eee;border-radius:14px;padding:14px;margin-bottom:16px}
    aside .widget h4{margin:0 0 12px}
    .prev-list{display:grid;gap:10px}
    .prev-item{display:flex;gap:10px}
    .prev-item img{width:84px;height:64px;object-fit:cover;border-radius:8px;border:1px solid #eee}
    .prev-item a{font-weight:600}

    /* Footer */
    footer{margin-top:28px;border-top:1px solid #eee;background:#fff}
    footer .grid{grid-template-columns:1fr 1fr}
    @media (max-width:900px){footer .grid{grid-template-columns:1fr}}
    .copyright{color:var(--muted);font-size:.9rem;padding:14px 0}

    /* Utility */
    .row{display:flex;gap:10px;align-items:center}
    .space{height:18px}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:1px solid #e5e7eb;background:var(--soft);font-weight:700}
    .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
    .search{display:flex;gap:8px}
    .search input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid #e5e7eb}
  </style>
</head>
<body>
  <header class="top">
    <div class="container">
      <div class="brand">
        <div class="logo">NO</div>
        <div>
          <h1>NotOut News</h1>
          <div class="tagline">තත්පරවත්ම සිංහල ප්‍රවෘත්ති | Breaking • දේශපාලන • ක්‍රීඩා • කලා • ගැස්සිප්</div>
        </div>
        <div style="margin-left:auto" class="search">
          <input id="q" placeholder="ප්‍රවෘත්ති සෙව්..." />
          <button class="btn" onclick="doSearch()">සොයන්න</button>
        </div>
      </div>
      <nav class="cats" id="cats"></nav>
    </div>
    <div class="ticker" id="ticker" style="display:none">
      <div class="container inner">
        <span class="badge">BREAKING</span>
        <div class="marquee"><span id="tickerText"></span></div>
        <button class="btn" onclick="clearBreaking()">ඉවත් කරන්න</button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Featured Row -->
    <section class="featured" id="featured"></section>

    <div class="space"></div>

    <div class="grid">
      <section>
        <div class="row" style="justify-content:space-between">
          <h2 id="sectionTitle">අලුත්ම ප්‍රවෘත්ති</h2>
          <div class="row">
            <button class="btn" onclick="setBreakingPrompt()">+ Breaking එකක්</button>
            <button class="btn" onclick="newPostPrompt()">+ පුවතක්</button>
          </div>
        </div>
        <div class="postlist" id="postlist"></div>
        <div class="space"></div>
        <div class="row" style="justify-content:center;gap:8px">
          <button class="btn" onclick="paginate(-1)">&larr; පසුපස</button>
          <button class="btn" onclick="paginate(1)">ඉදිරියට &rarr;</button>
        </div>
      </section>

      <aside>
        <div class="widget">
          <h4>පසුගිය ප්‍රවෘත්ති</h4>
          <div class="prev-list" id="previous"></div>
        </div>
        <div class="widget">
          <h4>ජනප්‍රිය කාණ්ඩ</h4>
          <div id="popularCats" class="row" style="flex-wrap:wrap"></div>
        </div>
      </aside>
    </div>
  </main>

  <footer>
    <div class="container">
      <div class="grid">
        <div>
          <h3>වෙබ්අඩවි තොරතුරු</h3>
          <ul>
            <li><a href="#colors"> වර්ණ සැලැස්ම</a></li>
            <li><a href="#license"> අවසර/License</a></li>
          </ul>
        </div>
        <div>
          <h3>සම්බන්ධ වන්න</h3>
          <p class="muted">© <span id="yr"></span> Lanka News. සියලු හිමිකම් ඇවිරිණි.</p>
        </div>
      </div>
      <p class="copyright">Powered by HTML • CSS • JavaScript | Noto Sans Sinhala</p>
    </div>
  </footer>

  <script>
    const POSTS_SOURCE = "inline";
    const POSTS_JSON_URL = "./data/posts.json";

    const CATEGORIES = [
      "සියල්ල", "බිඳවැටෙන", "දේශපාලන", "ක්‍රීඩා", "කලා", "දේශීය", "විදේශ", "ගැස්සිප්", "ත්‍රිමාණ"
    ];

    let inlinePosts = [
      {id:"p1", title:"කොළඹ නගරයේ නව සංවර්ධන සැලැස්ම නිලකාරව අනාවරණය", excerpt:"මොසින් 12ක් ඇතුළත මහානගරේ තීව්‍ර වෙනසක්…", date:"2025-11-06T09:00:00Z", author:"සංවර්ධන අංශය", category:"දේශීය", cover:"https://images.unsplash.com/photo-1558981806-ec527fa84c39?w=1200&q=80"},
      {id:"p2", title:"ශ්‍රී ලංකා කණ්ඩායම ටෙස්ට් තරගාවලිය 1–0 ජයග්‍රහණය කරයි", excerpt:"අවසන් දිනයේ දැඩි සටනකින් පසු…", date:"2025-11-05T14:30:00Z", author:"ක්‍රීඩා අංශය", category:"ක්‍රීඩා", cover:"https://images.unsplash.com/photo-1521417531069-2b2dff5a62cd?w=1200&q=80"},
      {id:"p3", title:"නව චිත්‍රපට ප්‍රචාරක කාණ්ඩය සමාජ මාධ්‍ය කම්පන කරන ලදි", excerpt:"නළු-නළුවන්ගේ අලුත් අදහස්…", date:"2025-11-04T19:30:00Z", author:"කලා අංශය", category:"කලා", cover:"https://images.unsplash.com/photo-1517604931442-7e0c8ed2963f?w=1200&q=80"},
      {id:"p4", title:"බිඳවැටෙන: දකුණු ප්‍රදේශවල කුණාටු සහ තද සුළං සීග්‍ර වාර්තා", excerpt:"ජනතාවට අවධානයෙන් සිටීමට ඉල්ලීමක්…", date:"2025-11-06T10:05:00Z", author:"Weather Desk", category:"බිඳවැටෙන", cover:"https://images.unsplash.com/photo-1502303756780-0c558b140b09?w=1200&q=80"},
      {id:"p5", title:"ගැස්සිප්: ජනප්‍රිය ගායකයෙකුගේ රහස් සංගීත නළුකම", excerpt:"සමාජ මාධ්‍ය හූ දමයි…", date:"2025-11-02T11:10:00Z", author:"ගැස්සිප් කණ්ඩායම", category:"ගැස්සිප්", cover:"https://images.unsplash.com/photo-1497032628192-86f99bcd76bc?w=1200&q=80"},
      {id:"p6", title:"විදේශ: ඩිජිටල් නීති නව සංශෝධන යුරෝපයේ බලපෑම්", excerpt:"Tech ව්‍යාපාර වලට විශාල වෙනස්කම්…", date:"2025-11-03T09:45:00Z", author:"විදේශ අංශය", category:"විදේශ", cover:"https://images.unsplash.com/photo-1518779578993-ec3579fee39f?w=1200&q=80"},
      {id:"p7", title:"දේශපාලන: පාර්ලිමේන්තුවේ අද ඇතිවූ තීරණ 5ක්", excerpt:"මුදල් හා සංවර්ධන කටයුතු…", date:"2025-11-06T07:20:00Z", author:"දේශපාලන වාර්තාකරු", category:"දේශපාලන", cover:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=1200&q=80"}
    ];

    let site = { breaking: "" };

    let state = { page: 1, pageSize: 9, cat: "සියල්ල", q: "" };

    const el = sel => document.querySelector(sel);
    const fmtDate = iso => new Date(iso).toLocaleString("si-LK", {dateStyle:"medium", timeStyle:"short"});
    const byDate = (a,b)=> new Date(b.date)-new Date(a.date);

    function saveLocal(){ localStorage.setItem("ln_posts", JSON.stringify(inlinePosts)); localStorage.setItem("ln_site", JSON.stringify(site)); }
    function loadLocal(){
      try{
        const p = JSON.parse(localStorage.getItem("ln_posts")); if(Array.isArray(p)&&p.length){ inlinePosts = p }
        const s = JSON.parse(localStorage.getItem("ln_site")); if(s){ site = s }
      }catch(e){}
    }

    async function getPosts(){
      if(POSTS_SOURCE==="json"){
        const r = await fetch(POSTS_JSON_URL); return await r.json();
      }
      return inlinePosts;
    }

    function renderCats(){
      const wrap = el('#cats'); wrap.innerHTML = '';
      CATEGORIES.forEach(c=>{
        const a = document.createElement('a'); a.href='#'; a.textContent=c; a.className = 'cat';
        if(c===state.cat) a.classList.add('active');
        a.addEventListener('click', e=>{e.preventDefault(); state.cat=c; state.page=1; update();});
        wrap.appendChild(a);
      });
    }

    function setBreakingPrompt(){
      const txt = prompt('Breaking ticker text (සිංහලෙන් ලියන්න):', site.breaking||'');
      if(txt!==null){ site.breaking = txt.trim(); saveLocal(); renderTicker(); }
    }
    function clearBreaking(){ site.breaking=''; saveLocal(); renderTicker(); }
    function renderTicker(){
      if(site.breaking){ el('#tickerText').textContent = ' ' + site.breaking + '  •  ' + site.breaking + '  •  ' + site.breaking + '  •  ';
        el('#ticker').style.display='block';
      }else{ el('#ticker').style.display='none'; }
    }

    function newPostPrompt(){
      const title = prompt('මාතෘකාව:'); if(!title) return;
      const excerpt = prompt('කෙටි
