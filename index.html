<!DOCTYPE html>
<html lang="si">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NotOut News ‚Äî Sinhala Breaking & Daily News</title>
  <meta name="description" content="‡∂≠‡∂≠‡∑ä‡∂¥‡∂ª‡∑Ä‡∂≠‡∑ä‡∂∏ ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ò‡∂≠‡∑ä‡∂≠‡∑í, ‡∂∂‡∑í‡∂≥‡∑Ä‡∑ê‡∂ß‡∑ô‡∂± ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ò‡∂≠‡∑ä‡∂≠‡∑í, ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è, ‡∂ö‡∂Ω‡∑è, ‡∂Ø‡∑ö‡∑Å‡∂¥‡∑è‡∂Ω‡∂±‡∂∫, ‡∂ú‡∑ê‡∑É‡∑ä‡∑É‡¥ø‡¥™‡µç‡¥™‡µç‚Äîall in one place." />
  <meta property="og:title" content="NotOut News" />
  <meta property="og:description" content="‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω Breaking News & ‡∂Ø‡∑õ‡∂±‡∑í‡∂ö ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ò‡∂≠‡∑ä‡∂≠‡∑í ‚Äî NotOut News" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/cover.jpg" />
  <meta name="theme-color" content="#c1121f" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@300;400;500;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --brand:#c1121f;       /* Primary (news red) */
      --brand-dark:#780000;  /* Deep red */
      --ink:#111;            /* Text */
      --muted:#6b7280;       /* Gray */
      --bg:#ffffff;          /* Background */
      --soft:#f8f9fa;        /* Cards */
      --accent:#1d4ed8;      /* Blue for links (brand blue) */
      --ok:#16a34a;          /* Success */
      --warn:#f59e0b;        /* Warning */
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:"Noto Sans Sinhala", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .container{max-width:1180px;margin:0 auto;padding:0 16px}
    header.top{
      position:sticky;top:0;z-index:50;background:#fff;border-bottom:1px solid #eee
    }
    .brand{display:flex;align-items:center;gap:12px;padding:14px 0}
    .logo{width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,var(--brand),var(--brand-dark));display:grid;place-items:center;color:#fff;font-weight:900;letter-spacing:1px}
    .brand h1{font-size:1.35rem;margin:0}
    .tagline{color:var(--muted);font-size:.9rem}
    nav.cats{display:flex;flex-wrap:wrap;gap:10px;padding:10px 0 14px}
    nav.cats a{padding:8px 12px;border-radius:999px;background:var(--soft);color:#111;border:1px solid #eee;font-weight:600}
    nav.cats a.active{background:var(--brand);border-color:var(--brand);color:#fff}

    /* Breaking ticker */
    .ticker{background:var(--brand);color:#fff}
    .ticker .inner{display:flex;gap:12px;align-items:center;padding:8px 0}
    .badge{font-weight:800;background:#fff;color:var(--brand);padding:4px 8px;border-radius:6px}
    .marquee{overflow:hidden;white-space:nowrap;flex:1}
    .marquee span{display:inline-block;padding-left:100%;animation:slide 22s linear infinite}
    @keyframes slide{0%{transform:translateX(0)}100%{transform:translateX(-100%)} }

    /* Layout */
    .grid{display:grid;grid-template-columns:2fr 1fr;gap:22px;margin:18px 0 28px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}

    .card{background:#fff;border:1px solid #eee;border-radius:14px;overflow:hidden}
    .card img{width:100%;height:220px;object-fit:cover}
    .card .pad{padding:14px}
    .card h3{margin:6px 0 8px;font-size:1.15rem}
    .muted{color:var(--muted);font-size:.9rem}

    /* Featured */
    .featured{display:grid;grid-template-columns:1.2fr 1fr;gap:18px}
    @media (max-width:900px){.featured{grid-template-columns:1fr}}

    .postlist{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    @media (max-width:1000px){.postlist{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:640px){.postlist{grid-template-columns:1fr}}

    /* Sidebar */
    aside .widget{background:#fff;border:1px solid #eee;border-radius:14px;padding:14px;margin-bottom:16px}
    aside .widget h4{margin:0 0 12px}
    .prev-list{display:grid;gap:10px}
    .prev-item{display:flex;gap:10px}
    .prev-item img{width:84px;height:64px;object-fit:cover;border-radius:8px;border:1px solid #eee}
    .prev-item a{font-weight:600}

    /* Footer */
    footer{margin-top:28px;border-top:1px solid #eee;background:#fff}
    footer .grid{grid-template-columns:1fr 1fr}
    @media (max-width:900px){footer .grid{grid-template-columns:1fr}}
    .copyright{color:var(--muted);font-size:.9rem;padding:14px 0}

    /* Utility */
    .row{display:flex;gap:10px;align-items:center}
    .space{height:18px}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;border:1px solid #e5e7eb;background:var(--soft);font-weight:700}
    .btn.primary{background:var(--brand);border-color:var(--brand);color:#fff}
    .search{display:flex;gap:8px}
    .search input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid #e5e7eb}
  </style>
</head>
<body>
  <header class="top">
    <div class="container">
      <div class="brand">
        <div class="logo">NO</div>
        <div>
          <h1>NotOut News</h1>
          <div class="tagline">‡∂≠‡∂≠‡∑ä‡∂¥‡∂ª‡∑Ä‡∂≠‡∑ä‡∂∏ ‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ò‡∂≠‡∑ä‡∂≠‡∑í | Breaking ‚Ä¢ ‡∂Ø‡∑ö‡∑Å‡∂¥‡∑è‡∂Ω‡∂± ‚Ä¢ ‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è ‚Ä¢ ‡∂ö‡∂Ω‡∑è ‚Ä¢ ‡∂ú‡∑ê‡∑É‡∑ä‡∑É‡∑í‡∂¥‡∑ä</div>
        </div>
        <div style="margin-left:auto" class="search">
          <input id="q" placeholder="‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ò‡∂≠‡∑ä‡∂≠‡∑í ‡∑É‡∑ô‡∑Ä‡∑ä..." />
          <button class="btn" onclick="doSearch()">‡∑É‡∑ú‡∂∫‡∂±‡∑ä‡∂±</button>
        </div>
      </div>
      <nav class="cats" id="cats"></nav>
    </div>
    <div class="ticker" id="ticker" style="display:none">
      <div class="container inner">
        <span class="badge">BREAKING</span>
        <div class="marquee"><span id="tickerText"></span></div>
        <button class="btn" onclick="clearBreaking()">‡∂â‡∑Ä‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±</button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Featured Row -->
    <section class="featured" id="featured"></section>

    <div class="space"></div>

    <div class="grid">
      <section>
        <div class="row" style="justify-content:space-between">
          <h2 id="sectionTitle">‡∂Ö‡∂Ω‡∑î‡∂≠‡∑ä‡∂∏ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ò‡∂≠‡∑ä‡∂≠‡∑í</h2>
          <div class="row">
            <button class="btn" onclick="setBreakingPrompt()">+ Breaking ‡∂ë‡∂ö‡∂ö‡∑ä</button>
            <button class="btn" onclick="newPostPrompt()">+ ‡∂¥‡∑î‡∑Ä‡∂≠‡∂ö‡∑ä</button>
          </div>
        </div>
        <div class="postlist" id="postlist"></div>
        <div class="space"></div>
        <div class="row" style="justify-content:center;gap:8px">
          <button class="btn" onclick="paginate(-1)">&larr; ‡∂¥‡∑É‡∑î‡∂¥‡∑É</button>
          <button class="btn" onclick="paginate(1)">‡∂â‡∂Ø‡∑í‡∂ª‡∑í‡∂∫‡∂ß &rarr;</button>
        </div>
      </section>

      <aside>
        <div class="widget">
          <h4>‡∂¥‡∑É‡∑î‡∂ú‡∑í‡∂∫ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ò‡∂≠‡∑ä‡∂≠‡∑í</h4>
          <div class="prev-list" id="previous"></div>
        </div>
        <div class="widget">
          <h4>‡∂¢‡∂±‡∂¥‡∑ä‚Äç‡∂ª‡∑í‡∂∫ ‡∂ö‡∑è‡∂´‡∑ä‡∂©</h4>
          <div id="popularCats" class="row" style="flex-wrap:wrap"></div>
        </div>
        <div class="widget">
          <h4>‡∑Ä‡∑ô‡∂∂‡∑ä‡∂Ö‡∂©‡∑Ä‡∑í ‡∑Ä‡∑í‡∑É‡∑ä‡∂≠‡∂ª</h4>
          <p class="muted">GitHub Pages/ Blogger ‡∑É‡∂≥‡∑Ñ‡∑è ‡∑É‡∑î‡∂Ø‡∑î‡∑É‡∑î ‡∂Ω‡∑ô‡∑É ‡∑É‡∂ö‡∑É‡∑ä ‡∂ö‡∑Ö ‡∑É‡∂ª‡∑Ö ‡∑É‡∂Ω‡∑è‡∂ö‡∑è‡∑Ä. <a href="#howto">How‚ÄëTo</a> ‡∂∂‡∂Ω‡∂±‡∑ä‡∂±.</p>
        </div>
      </aside>
    </div>
  </main>

  <footer>
    <div class="container">
      <div class="grid">
        <div>
          <h3>‡∑Ä‡∑ô‡∂∂‡∑ä‡∂Ö‡∂©‡∑Ä‡∑í ‡∂≠‡∑ú‡∂ª‡∂≠‡∑î‡∂ª‡∑î</h3>
          <ul>
            <li><a href="#howto">‡∂Ö‡∂Ω‡∑î‡∂≠‡∑ä ‡∂¥‡∑î‡∑Ä‡∂≠‡∂ö‡∑ä ‡∂ë‡∂ö‡∂≠‡∑î ‡∂ö‡∂ª‡∂± taram</a></li>
            <li><a href="#colors"> ‡∑Ä‡∂ª‡∑ä‡∂´ ‡∑É‡∑ê‡∂Ω‡∑ê‡∑É‡∑ä‡∂∏</a></li>
            <li><a href="#license"> ‡∂Ö‡∑Ä‡∑É‡∂ª/License</a></li>
          </ul>
        </div>
        <div>
          <h3>‡∑É‡∂∏‡∑ä‡∂∂‡∂±‡∑ä‡∂∞ ‡∑Ä‡∂±‡∑ä‡∂±</h3>
          <p class="muted">¬© <span id="yr"></span> Lanka News. ‡∑É‡∑í‡∂∫‡∂Ω‡∑î ‡∑Ñ‡∑í‡∂∏‡∑í‡∂ö‡∂∏‡∑ä ‡∂á‡∑Ä‡∑í‡∂ª‡∑í‡∂´‡∑í.</p>
        </div>
      </div>
      <p class="copyright">Powered by HTML ‚Ä¢ CSS ‚Ä¢ JavaScript | Noto Sans Sinhala</p>
    </div>
  </footer>

  <!-- How-To (kept in page so this file can be pasted into Blogger Theme too) -->
  <section class="container" id="howto" style="margin:24px auto 60px">
    <h2>‚öôÔ∏è How‚ÄëTo</h2>
    <ol>
      <li><b>‡∂±‡∂∏/‡∑Ä‡∂ª‡∑ä‡∂´ ‡∑Ä‡∑ô‡∂±‡∑É‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±:</b> <code>--brand</code> ‡∑Ä‡∂ª‡∑ä‡∂´‡∂∫ ‡∑Ñ‡∑è "NotOut News" ‡∂¥‡∑ô‡∑Ö header ‡∑Ñ‡∑í ‡∑É‡∂Ç‡∑É‡∑ä‡∂ö‡∂ª‡∂´‡∂∫ ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.</li>
      <li><b>Breaking News:</b> <em>+ Breaking ‡∂ë‡∂ö‡∂ö‡∑ä</em> ‡∂î‡∂∂‡∑è ‡∂¥‡∑ô‡∑Ö ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±. JSON‚Äã‡∂ß <code>site.breaking</code> ‡∂Ω‡∑ô‡∑É ‡∑É‡∑î‡∂ª‡∂ö‡∑í‡∂± ‡∂Ö‡∂≠‡∂ª GitHub‚Äã‡∑Ñ‡∑í <code>data/site.json</code> ‡∑Ä‡∑ô‡∂≠ ‡∂ú‡∂Ω‡∑Ä‡∑è ‡∂ú‡∂≠ ‡∑Ñ‡∑ê‡∂ö.</li>
      <li><b>‡∂±‡∑Ä ‡∂¥‡∑î‡∑Ä‡∂≠‡∂ö‡∑ä:</b> <em>+ ‡∂¥‡∑î‡∑Ä‡∂≠‡∂ö‡∑ä</em> ‡∂î‡∂∂‡∑è ‡∑Å‡∑ì‡∂ª‡∑ä‡∑Ç‡∂∫/‡∂ö‡∑ô‡∂ß‡∑í ‡∂ö‡∂Æ‡∑è‡∑Ä/‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥ URL/‡∂ö‡∑è‡∂´‡∑ä‡∂©‡∂∫ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±. (Demo‚Äã‡∑Ä‡∑Å‡∂∫‡∑ô‡∂±‡∑ä LocalStorage‚Äã‡∑Ñ‡∑í ‡∑É‡∑î‡∂ª‡∂ö‡∂∫‡∑í.)
        GitHub Pages‚Äã‡∂ß ‡∂ú‡∑ú‡∑É‡∑ä <code>posts/</code> ‡∑Ü‡∑ù‡∂Ω‡∑ä‡∂©‡∂ª‡∂∫‡∂ö HTML ‡∂ú‡∑ú‡∂±‡∑î ‡∂Ω‡∑ô‡∑É ‡∂≠‡∂∂‡∂±‡∑ä‡∂±. <code>data/posts.json</code> ‡∂ë‡∂ö‡∂ö‡∑ä ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∑Ö‡∑Ñ‡∑ú‡∂≠‡∑ä <code>POSTS_SOURCE = "json"</code> ‡∂Ω‡∑ô‡∑É ‡∑É‡∂ö‡∑É‡∂±‡∑ä‡∂±.</li>
      <li><b>GitHub Pages:</b> Repo‚Äã‡∂ö <code>Settings ‚Üí Pages ‚Üí Source: main / root</code> ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂±. <code>index.html</code> ‡∂∏‡∑ô‡∂∏ ‡∂ú‡∑ú‡∂±‡∑î‡∑Ä‡∂∫‡∑í.</li>
      <li><b>Blogger:</b> <em>Theme ‚Üí Edit HTML</em> ‡∑Ä‡∑ô‡∂≠ ‡∂ú‡∑ú‡∑É‡∑ä, ‡∂ö‡∑ö‡∂≠‡∂∫ ‡§∏‡§¨‡•à ‡∂∏‡∂ö‡∑è ‡∂∏‡∑ô‡∂∫ ‡∂¥‡∑ö‡∑É‡∑ä‡∂ß‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±. ‡∂¥‡∑í‡∂ß‡∂≠‡∑í‡∂±‡∑ä CSS/JS ‡∂ú‡∑ú‡∂±‡∑î ‡∂∑‡∑è‡∑Ä‡∑í‡∂≠‡∑è ‡∂ö‡∂ª‡∂∫‡∑í ‡∂±‡∂∏‡∑ä ‡∂í‡∑Ä‡∑è‡∂ß ‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ URL ‡∂Ø‡∑í‡∂∫ ‡∂∫‡∑î‡∂≠‡∑î‡∂∫.</li>
    </ol>
    <h3 id="colors">üé® ‡∑Ä‡∂ª‡∑ä‡∂´ ‡∑É‡∑ê‡∂Ω‡∑ê‡∑É‡∑ä‡∂∏</h3>
    <p>‡∂¥‡∑è‡∂ª‡∂∏‡∑ä‡∂¥‡∂ª‡∑í‡∂ö <b>‡∂ª‡∂≠‡∑î</b> (Breaking), ‡∂±‡∑í‡∂Ω‡∑ä ‡∂Ω‡∑í‡∂±‡∑ä‡∂ö‡∑ä, ‡∑É‡∑î‡∂Ø‡∑î ‡∂¥‡∑É‡∑î‡∂∂‡∑í‡∂∏. ‡∂î‡∂∂‡∂ß ‡∂Ö‡∑Ä‡∑Å‡∑ä‚Äç‡∂∫ ‡∂±‡∂∏‡∑ä ‡∂≠‡∑ö‡∂∏‡∑è ‡∑Ä‡∑ô‡∂±‡∑É‡∑ä ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß :root ‡∑Ä‡∑ô‡∂±‡∑É‡∑ä ‡∂ö‡∂ª‡∂±‡∑ä‡∂±.</p>
    <h3 id="license">üßæ License</h3>
    <p>MIT License ‚Äî ‡∑Ä‡∑ô‡∂∂‡∑ä‡∂Ö‡∂©‡∑Ä‡∑í‡∂∫ ‡∂±‡∑í‡∂Ø‡∑Ñ‡∑É‡∑ä‡∑Ä ‡∑Ä‡∑ô‡∂±‡∑É‡∑ä ‡∂ö‡∂ª ‡∂¥‡∑ä‚Äç‡∂ª‡∑É‡∑í‡∂Ø‡∑ä‡∂∞‡∑í ‡∂ö‡∑Ö ‡∑Ñ‡∑ê‡∂ö.</p>
  </section>

  <script>
    // ---- Config ----
    const POSTS_SOURCE = "inline"; // "inline" | "json"
    const POSTS_JSON_URL = "./data/posts.json"; // If you externalize to GitHub

    // Categories (Sinhala)
    const CATEGORIES = [
      "‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω", "‡∂∂‡∑í‡∂≥‡∑Ä‡∑ê‡∂ß‡∑ô‡∂±", "‡∂Ø‡∑ö‡∑Å‡∂¥‡∑è‡∂Ω‡∂±", "‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è", "‡∂ö‡∂Ω‡∑è", "‡∂Ø‡∑ö‡∑Å‡∑ì‡∂∫", "‡∑Ä‡∑í‡∂Ø‡∑ö‡∑Å", "‡∂ú‡∑ê‡∑É‡∑ä‡∑É‡∑í‡∂¥‡∑ä", "‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂∏‡∑è‡∂´"
    ];

    // Demo inline posts (edit/remove in production)
    let inlinePosts = [
      {id:"p1", title:"‡∂ö‡∑ú‡∑Ö‡∂π ‡∂±‡∂ú‡∂ª‡∂∫‡∑ô‡∑ä ‡∂±‡∑Ä ‡∑É‡∂Ç‡∑Ä‡∂ª‡∑ä‡∂∞‡∂± ‡∑É‡∑ê‡∂Ω‡∑ê‡∑É‡∑ä‡∂∏ ‡∂±‡∑í‡∂Ω‡∂ö‡∑è‡∂ª‡∑Ä ‡∂Ö‡∂±‡∑è‡∑Ä‡∂ª‡∂´‡∂∫", excerpt:"‡∂∏‡∑ô‡∑è‡∑É‡∑í‡∂±‡∑ä 12‡∂ö‡∑ä ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠ ‡∂∏‡∑Ñ‡∑è‡∂±‡∂ú‡∂ª‡∑ö ‡∂≠‡∑ì‡∑Ä‡∑ä‚Äç‡∂ª ‡∑Ä‡∑ô‡∂±‡∑É‡∂ö‡∑ä‚Ä¶", date:"2025-11-06T09:00:00Z", author:"‡∑É‡∂Ç‡∑Ä‡∂ª‡∑ä‡∂∞‡∂± ‡∂Ö‡∂Ç‡∑Å‡∂∫", category:"‡∂Ø‡∑ö‡∑Å‡∑ì‡∂∫", cover:"https://images.unsplash.com/photo-1558981806-ec527fa84c39?w=1200&q=80"},
      {id:"p2", title:"‡∑Å‡∑ä‚Äç‡∂ª‡∑ì ‡∂Ω‡∂Ç‡∂ö‡∑è ‡∂ö‡∂´‡∑ä‡∂©‡∑è‡∂∫‡∂∏ ‡∂ß‡∑ô‡∑É‡∑ä‡∂ß‡∑ä ‡∂≠‡∂ª‡∂ú‡∑è‡∑Ä‡∂Ω‡∑í‡∂∫ 1‚Äì0 ‡∂¢‡∂∫‡∂ú‡∑ä‚Äç‡∂ª‡∑Ñ‡∂´‡∂∫ ‡∂ö‡∂ª‡∂∫‡∑í", excerpt:"‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä ‡∂Ø‡∑í‡∂±‡∂∫‡∑ö ‡∂Ø‡∑ê‡∂©‡∑í ‡∑É‡∂ß‡∂±‡∂ö‡∑í‡∂±‡∑ä ‡∂¥‡∑É‡∑î‚Ä¶", date:"2025-11-05T14:30:00Z", author:"‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è ‡∂Ö‡∂Ç‡∑Å‡∂∫", category:"‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è", cover:"https://images.unsplash.com/photo-1521417531069-2b2dff5a62cd?w=1200&q=80"},
      {id:"p3", title:"‡∂±‡∑Ä ‡∂†‡∑í‡∂≠‡∑ä‚Äç‡∂ª‡∂¥‡∂ß ‡∂¥‡∑ä‚Äç‡∂ª‡∂†‡∑è‡∂ª‡∂ö ‡∂ö‡∑è‡∂´‡∑ä‡∂©‡∂∫ ‡∑É‡∂∏‡∑è‡∂¢ ‡∂∏‡∑è‡∂∞‡∑ä‚Äç‡∂∫ ‡∂ö‡∂∏‡∑ä‡∂¥‡∂± ‡∂ö‡∂ª‡∂± ‡∂Ω‡∂Ø‡∑í", excerpt:"‡∂±‡∑Ö‡∑î-‡∂±‡∑Ö‡∑î‡∑Ä‡∂±‡∑ä‡∂ú‡∑ö ‡∂Ö‡∂Ω‡∑î‡∂≠‡∑ä ‡∂Ö‡∂Ø‡∑Ñ‡∑É‡∑ä‚Ä¶", date:"2025-11-04T19:30:00Z", author:"‡∂ö‡∂Ω‡∑è ‡∂Ö‡∂Ç‡∑Å‡∂∫", category:"‡∂ö‡∂Ω‡∑è", cover:"https://images.unsplash.com/photo-1517604931442-7e0c8ed2963f?w=1200&q=80"},
      {id:"p4", title:"‡∂∂‡∑í‡∂≥‡∑Ä‡∑ê‡∂ß‡∑ô‡∂±: ‡∂Ø‡∂ö‡∑î‡∂´‡∑î ‡∂¥‡∑ä‚Äç‡∂ª‡∂Ø‡∑ö‡∑Å‡∑Ä‡∂Ω ‡∂ö‡∑î‡∂´‡∑è‡∂ß‡∑î ‡∑É‡∑Ñ ‡∂≠‡∂Ø ‡∑É‡∑î‡∑Ö‡∂Ç ‡∑É‡∑ì‡∂ú‡∑ä‚Äç‡∂ª ‡∑Ä‡∑è‡∂ª‡∑ä‡∂≠‡∑è", excerpt:"‡∂¢‡∂±‡∂≠‡∑è‡∑Ä‡∂ß ‡∂Ö‡∑Ä‡∂∞‡∑è‡∂±‡∂∫‡∑ô‡∂±‡∑ä ‡∑É‡∑í‡∂ß‡∑ì‡∂∏‡∂ß ‡∂â‡∂Ω‡∑ä‡∂Ω‡∑ì‡∂∏‡∂ö‡∑ä‚Ä¶", date:"2025-11-06T10:05:00Z", author:"Weather Desk", category:"‡∂∂‡∑í‡∂≥‡∑Ä‡∑ê‡∂ß‡∑ô‡∂±", cover:"https://images.unsplash.com/photo-1502303756780-0c558b140b09?w=1200&q=80"},
      {id:"p5", title:"‡∂ú‡∑ê‡∑É‡∑ä‡∑É‡∑í‡∂¥‡∑ä: ‡∂¢‡∂±‡∂¥‡∑ä‚Äç‡∂ª‡∑í‡∂∫ ‡∂ú‡∑è‡∂∫‡∂ö‡∂∫‡∑ô‡∂ö‡∑î‡∂ú‡∑ö ‡∂ª‡∑Ñ‡∑É‡∑ä ‡∑É‡∂Ç‡∂ú‡∑ì‡∂≠ ‡∂±‡∑Ö‡∑î‡∂ö‡∂∏", excerpt:"‡∑É‡∂∏‡∑è‡∂¢ ‡∂∏‡∑è‡∂∞‡∑ä‚Äç‡∂∫ ‡∑Ñ‡∑ñ ‡∂Ø‡∂∏‡∂∫‡∑í‚Ä¶", date:"2025-11-02T11:10:00Z", author:"‡∂ú‡∑ê‡∑É‡∑ä‡∑É‡∑í‡∂¥‡∑ä ‡∂ö‡∂´‡∑ä‡∂©‡∑è‡∂∫‡∂∏", category:"‡∂ú‡∑ê‡∑É‡∑ä‡∑É‡∑í‡∂¥‡∑ä", cover:"https://images.unsplash.com/photo-1497032628192-86f99bcd76bc?w=1200&q=80"},
      {id:"p6", title:"‡∑Ä‡∑í‡∂Ø‡∑ö‡∑Å: ‡∂©‡∑í‡∂¢‡∑í‡∂ß‡∂Ω‡∑ä ‡∂±‡∑ì‡∂≠‡∑í ‡∂±‡∑Ä ‡∑É‡∂Ç‡∑Å‡∑ù‡∂∞‡∂± ‡∂∫‡∑î‡∂ª‡∑ù‡∂¥‡∂∫‡∑ö ‡∂∂‡∂Ω‡∂¥‡∑ë‡∂∏‡∑ä", excerpt:"Tech ‡∑Ä‡∑ä‚Äç‡∂∫‡∑è‡∂¥‡∑è‡∂ª ‡∑Ä‡∂Ω‡∂ß ‡∑Ä‡∑í‡∑Å‡∑è‡∂Ω ‡∑Ä‡∑ô‡∂±‡∑É‡∑ä‡∂ö‡∂∏‡∑ä‚Ä¶", date:"2025-11-03T09:45:00Z", author:"‡∑Ä‡∑í‡∂Ø‡∑ö‡∑Å ‡∂Ö‡∂Ç‡∑Å‡∂∫", category:"‡∑Ä‡∑í‡∂Ø‡∑ö‡∑Å", cover:"https://images.unsplash.com/photo-1518779578993-ec3579fee39f?w=1200&q=80"},
      {id:"p7", title:"‡∂Ø‡∑ö‡∑Å‡∂¥‡∑è‡∂Ω‡∂±: ‡∂¥‡∑è‡∂ª‡∑ä‡∂Ω‡∑í‡∂∏‡∑ö‡∂±‡∑ä‡∂≠‡∑î‡∑Ä‡∑ö ‡∂Ö‡∂Ø ‡∂á‡∂≠‡∑í‡∑Ä‡∑ñ ‡∂≠‡∑ì‡∂ª‡∂´ 5‡∂ö‡∑ä", excerpt:"‡∂∏‡∑î‡∂Ø‡∂Ω‡∑ä ‡∑Ñ‡∑è ‡∑É‡∂Ç‡∑Ä‡∂ª‡∑ä‡∂∞‡∂± ‡∂ö‡∂ß‡∂∫‡∑î‡∂≠‡∑î‚Ä¶", date:"2025-11-06T07:20:00Z", author:"‡∂Ø‡∑ö‡∑Å‡∂¥‡∑è‡∂Ω‡∂± ‡∑Ä‡∑è‡∂ª‡∑ä‡∂≠‡∑è‡∂ö‡∂ª‡∑î", category:"‡∂Ø‡∑ö‡∑Å‡∂¥‡∑è‡∂Ω‡∂±", cover:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?w=1200&q=80"}
    ];

    // Site data (breaking etc.)
    let site = { breaking: "" };

    // ---- State ----
    let state = { page: 1, pageSize: 9, cat: "‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω", q: "" };

    // ---- Helpers ----
    const el = sel => document.querySelector(sel);
    const fmtDate = iso => new Date(iso).toLocaleString("si-LK", {dateStyle:"medium", timeStyle:"short"});
    const byDate = (a,b)=> new Date(b.date)-new Date(a.date);

    function saveLocal(){ localStorage.setItem("ln_posts", JSON.stringify(inlinePosts)); localStorage.setItem("ln_site", JSON.stringify(site)); }
    function loadLocal(){
      try{
        const p = JSON.parse(localStorage.getItem("ln_posts")); if(Array.isArray(p)&&p.length){ inlinePosts = p }
        const s = JSON.parse(localStorage.getItem("ln_site")); if(s){ site = s }
      }catch(e){}
    }

    async function getPosts(){
      if(POSTS_SOURCE==="json"){
        const r = await fetch(POSTS_JSON_URL); return await r.json();
      }
      return inlinePosts;
    }

    function renderCats(){
      const wrap = el('#cats'); wrap.innerHTML = '';
      CATEGORIES.forEach(c=>{
        const a = document.createElement('a'); a.href='#'; a.textContent=c; a.className = 'cat';
        if(c===state.cat) a.classList.add('active');
        a.addEventListener('click', e=>{e.preventDefault(); state.cat=c; state.page=1; update();});
        wrap.appendChild(a);
      });
    }

    function setBreakingPrompt(){
      const txt = prompt('Breaking ticker text (‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω‡∑ô‡∂±‡∑ä ‡∂Ω‡∑í‡∂∫‡∂±‡∑ä‡∂±):', site.breaking||'');
      if(txt!==null){ site.breaking = txt.trim(); saveLocal(); renderTicker(); }
    }
    function clearBreaking(){ site.breaking=''; saveLocal(); renderTicker(); }
    function renderTicker(){
      if(site.breaking){ el('#tickerText').textContent = ' ' + site.breaking + '  ‚Ä¢  ' + site.breaking + '  ‚Ä¢  ' + site.breaking + '  ‚Ä¢  ';
        el('#ticker').style.display='block';
      }else{ el('#ticker').style.display='none'; }
    }

    function newPostPrompt(){
      const title = prompt('‡∂∏‡∑è‡∂≠‡∑ò‡∂ö‡∑è‡∑Ä:'); if(!title) return;
      const excerpt = prompt('‡∂ö‡∑ô‡∂ß‡∑í ‡∑É‡∑è‡∂ª‡∑è‡∂Ç‡∑Å‡∂∫:')||'';
      const cover = prompt('‡∂°‡∑è‡∂∫‡∑è‡∂ª‡∑ñ‡∂¥ URL (‡∂ã‡∂Ø‡∑è: https://...)')||'';
      const category = prompt('‡∂ö‡∑è‡∂´‡∑ä‡∂©‡∂∫ (‡∂Ø‡∑ö‡∑Å‡∂¥‡∑è‡∂Ω‡∂±/‡∂ö‡∑ä‚Äç‡∂ª‡∑ì‡∂©‡∑è/‡∂ö‡∂Ω‡∑è/‚Ä¶):')||'‡∂Ø‡∑ö‡∑Å‡∑ì‡∂∫';
      inlinePosts.push({id:'p'+Date.now(), title, excerpt, date:new Date().toISOString(), author:'News Desk', category, cover});
      saveLocal(); update();
    }

    function doSearch(){ state.q = el('#q').value.trim(); state.page=1; update(); }

    function paginate(dir){ state.page = Math.max(1, state.page + dir); update(); }

    function filtered(posts){
      let arr = [...posts];
      if(state.cat!=="‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω") arr = arr.filter(p=>p.category===state.cat);
      if(state.q) arr = arr.filter(p=> (p.title+p.excerpt).includes(state.q));
      return arr.sort(byDate);
    }

    function renderFeatured(posts){
      const wrap = el('#featured'); wrap.innerHTML='';
      const top = posts.slice(0,3);
      if(!top.length){ wrap.style.display='none'; return }
      wrap.style.display='grid';
      // Big card + two small
      const big = top[0];
      wrap.appendChild(card(big, true));
      const right = document.createElement('div'); right.className='col';
      top.slice(1).forEach(p=> right.appendChild(card(p)) );
      wrap.appendChild(right);
    }

    function card(p, big=false){
      const c = document.createElement('article'); c.className='card';
      c.innerHTML = `
        ${p.cover?`<img src="${p.cover}" alt="">`:''}
        <div class="pad">
          <span class="muted">${p.category} ‚Ä¢ ${fmtDate(p.date)}</span>
          <h3>${p.title}</h3>
          <p class="muted">${p.excerpt}</p>
          <a class="btn" href="#" onclick="openPost('${p.id}');return false;">‡∂â‡∂Ø‡∑í‡∂ª‡∑í‡∂∫‡∂ß ‡∂ö‡∑í‡∂∫‡∑Ä‡∂±‡∑ä‡∂±</a>
        </div>`;
      if(big){ c.style.gridColumn='1'; }
      return c;
    }

    function openPost(id){
      const p = inlinePosts.find(x=>x.id===id);
      if(!p) return;
      const html = `
        <div class='container'>
          <p><a href='/' onclick='history.back();return false;'>&larr; ‡∂¥‡∑í‡∂ß‡∑î‡∂¥‡∑É‡∂ß</a></p>
          <article class='card'>
            ${p.cover?`<img src='${p.cover}' alt=''>`:''}
            <div class='pad'>
              <span class='muted'>${p.category} ‚Ä¢ ${fmtDate(p.date)} ‚Ä¢ ${p.author||''}</span>
              <h1 style='margin:.3rem 0 0.7rem'>${p.title}</h1>
              <p style='font-size:1.05rem;line-height:1.9'>${p.excerpt} ‚Ä¶ (‡∂Ø‡∑ê‡∂ö‡∑ä‡∂∏ ‡∑É‡∂≥‡∑Ñ‡∑è demo ‡∂¥‡∑ô‡∑Ö)</p>
            </div>
          </article>
        </div>`;
      document.body.innerHTML = html; window.scrollTo(0,0);
    }

    function renderList(posts){
      const list = el('#postlist'); list.innerHTML='';
      const start = (state.page-1)*state.pageSize;
      posts.slice(start, start+state.pageSize).forEach(p=> list.appendChild(card(p)) );
    }

    function renderPrevious(posts){
      const prev = el('#previous'); prev.innerHTML='';
      posts.slice(3, 10).forEach(p=>{
        const d = document.createElement('div'); d.className='prev-item';
        d.innerHTML = `
          ${p.cover?`<img src='${p.cover}' alt=''>`:''}
          <div>
            <a href="#" onclick="openPost('${p.id}');return false;">${p.title}</a>
            <div class='muted' style='font-size:.85rem'>${fmtDate(p.date)}</div>
          </div>`;
        prev.appendChild(d);
      })
    }

    function renderPopularCats(posts){
      const byCat = Object.groupBy? Object.groupBy(posts, p=>p.category) : posts.reduce((acc,p)=>{(acc[p.category] ||= []).push(p); return acc}, {});
      const entries = Object.entries(byCat).sort((a,b)=>b[1].length-a[1].length).slice(0,6);
      const wrap = el('#popularCats'); wrap.innerHTML='';
      entries.forEach(([k,v])=>{
        const a = document.createElement('a'); a.href='#'; a.className='btn'; a.textContent=`${k} (${v.length})`;
        a.onclick=(e)=>{e.preventDefault(); state.cat=k; state.page=1; update();};
        wrap.appendChild(a);
      });
    }

    async function update(){
      const all = await getPosts();
      const posts = filtered(all);
      el('#sectionTitle').textContent = state.cat==="‡∑É‡∑í‡∂∫‡∂Ω‡∑ä‡∂Ω"? '‡∂Ö‡∂Ω‡∑î‡∂≠‡∑ä‡∂∏ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ò‡∂≠‡∑ä‡∂≠‡∑í' : state.cat + ' ‡∂¥‡∑ä‚Äç‡∂ª‡∑Ä‡∑ò‡∂≠‡∑ä‡∂≠‡∑í';
      renderCats();
      renderFeatured(posts);
      renderList(posts);
      renderPrevious(all.sort(byDate));
      renderPopularCats(all);
      renderTicker();
    }

    // Init
    loadLocal();
    document.getElementById('yr').textContent = new Date().getFullYear();
    update();
  </script>
</body>
</html>
